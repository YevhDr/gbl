
<html>

<head>
    <title>three.js webgl - glTF loader</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link type="text/css" rel="stylesheet" href="main.css">
    <title>Three.js Sinagoga</title>
    <style>
        body {
            margin: 0;
            background-color: #f0f0f0;
            color: black;
        }
        canvas { width: 90%; height: 100% }

        #model-1 {
            overflow: hidden;
            width: 96%;
            height: 90vh;
            margin:auto;

        }

        #loading {
            position: fixed;
            width: 100%;
            height: 90vh;
            background: #fff url('img/loader.gif') no-repeat center center;
            z-index: 9999;
        }

        p {
            width: 50%;
            margin: 50px auto;
            font-size: 18px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Libero nunc consequat interdum varius sit amet mattis vulputate. Adipiscing tristique risus nec feugiat in fermentum posuere urna. Nec dui nunc mattis enim ut tellus elementum sagittis vitae. In pellentesque massa placerat duis. Vel orci porta non pulvinar neque laoreet suspendisse. In hendrerit gravida rutrum quisque non tellus orci ac auctor. Vitae ultricies leo integer malesuada. Tellus pellentesque eu tincidunt tortor aliquam nulla facilisi cras fermentum. Sed vulputate odio ut enim blandit volutpat maecenas volutpat. Erat pellentesque adipiscing commodo elit. Viverra ipsum nunc aliquet bibendum enim. Suspendisse interdum consectetur libero id faucibus nisl.</p>

<p>   Est ullamcorper eget nulla facilisi etiam dignissim diam quis. Aliquam sem fringilla ut morbi tincidunt. Est ultricies integer quis auctor elit. Ultrices neque ornare aenean euismod elementum nisi quis eleifend. Vivamus at augue eget arcu dictum varius duis at. Semper risus in hendrerit gravida. Quis varius quam quisque id diam. Pharetra convallis posuere morbi leo. Urna cursus eget nunc scelerisque. Enim tortor at auctor urna nunc id cursus metus. Massa tincidunt nunc pulvinar sapien et ligula ullamcorper malesuada. Praesent semper feugiat nibh sed pulvinar proin gravida hendrerit lectus. Dictum varius duis at consectetur lorem donec massa sapien faucibus. Purus gravida quis blandit turpis cursus in hac.</p>

<p>   Risus nec feugiat in fermentum posuere. Praesent tristique magna sit amet purus gravida. Senectus et netus et malesuada fames ac turpis. Egestas sed sed risus pretium. Enim facilisis gravida neque convallis a cras semper auctor neque. Leo duis ut diam quam nulla. Phasellus egestas tellus rutrum tellus pellentesque eu tincidunt. Tellus at urna condimentum mattis pellentesque id nibh tortor id. Placerat in egestas erat imperdiet sed euismod nisi porta. Blandit volutpat maecenas volutpat blandit aliquam. Nulla facilisi nullam vehicula ipsum a. Metus vulputate eu scelerisque felis imperdiet. Eget gravida cum sociis natoque penatibus et magnis dis. Suspendisse in est ante in nibh mauris cursus mattis molestie. Interdum consectetur libero id faucibus nisl tincidunt eget nullam non. Nisl condimentum id venenatis a condimentum. Faucibus turpis in eu mi. Nisl condimentum id venenatis a condimentum vitae sapien pellentesque habitant. Tortor condimentum lacinia quis vel. Vulputate odio ut enim blandit volutpat maecenas volutpat.</p>

<p>   Lacus luctus accumsan tortor posuere ac ut consequat. Volutpat est velit egestas dui. Netus et malesuada fames ac turpis egestas. Proin nibh nisl condimentum id venenatis a condimentum vitae. Nisi porta lorem mollis aliquam ut porttitor leo. Ultrices mi tempus imperdiet nulla malesuada. Quam vulputate dignissim suspendisse in est ante in nibh. Faucibus purus in massa tempor nec feugiat nisl pretium. Mattis pellentesque id nibh tortor id aliquet lectus proin. Hendrerit dolor magna eget est lorem ipsum. Aliquam ultrices sagittis orci a scelerisque purus semper eget duis. Cras ornare arcu dui vivamus arcu felis bibendum.</p>

<p>    Eget nullam non nisi est. Viverra adipiscing at in tellus integer feugiat. At erat pellentesque adipiscing commodo elit. In hac habitasse platea dictumst vestibulum. Ut sem nulla pharetra diam. Dictum at tempor commodo ullamcorper a lacus. Amet nulla facilisi morbi tempus. Cras tincidunt lobortis feugiat vivamus. Morbi tristique senectus et netus et malesuada fames ac turpis. Eget mi proin sed libero enim sed. Vulputate ut pharetra sit amet aliquam id diam maecenas ultricies. Eget gravida cum sociis natoque penatibus et magnis dis parturient.</p>

<p style="color: red;">Це інтерактивна 3D модель, завантаження може зайняти трохи часу. Клікніть на модель, щоб активувати можливість зумити і роздивитись її. Модель можна обертати, утримуючи праву кнопку миші. Щоб відключити зум і скролити далі, клікніть ще раз.</p>

<div id="model-1">
    <div id="loading"></div>
</div>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Libero nunc consequat interdum varius sit amet mattis vulputate. Adipiscing tristique risus nec feugiat in fermentum posuere urna. Nec dui nunc mattis enim ut tellus elementum sagittis vitae. In pellentesque massa placerat duis. Vel orci porta non pulvinar neque laoreet suspendisse. In hendrerit gravida rutrum quisque non tellus orci ac auctor. Vitae ultricies leo integer malesuada. Tellus pellentesque eu tincidunt tortor aliquam nulla facilisi cras fermentum. Sed vulputate odio ut enim blandit volutpat maecenas volutpat. Erat pellentesque adipiscing commodo elit. Viverra ipsum nunc aliquet bibendum enim. Suspendisse interdum consectetur libero id faucibus nisl.</p>

<p>   Est ullamcorper eget nulla facilisi etiam dignissim diam quis. Aliquam sem fringilla ut morbi tincidunt. Est ultricies integer quis auctor elit. Ultrices neque ornare aenean euismod elementum nisi quis eleifend. Vivamus at augue eget arcu dictum varius duis at. Semper risus in hendrerit gravida. Quis varius quam quisque id diam. Pharetra convallis posuere morbi leo. Urna cursus eget nunc scelerisque. Enim tortor at auctor urna nunc id cursus metus. Massa tincidunt nunc pulvinar sapien et ligula ullamcorper malesuada. Praesent semper feugiat nibh sed pulvinar proin gravida hendrerit lectus. Dictum varius duis at consectetur lorem donec massa sapien faucibus. Purus gravida quis blandit turpis cursus in hac.</p>

<p>   Risus nec feugiat in fermentum posuere. Praesent tristique magna sit amet purus gravida. Senectus et netus et malesuada fames ac turpis. Egestas sed sed risus pretium. Enim facilisis gravida neque convallis a cras semper auctor neque. Leo duis ut diam quam nulla. Phasellus egestas tellus rutrum tellus pellentesque eu tincidunt. Tellus at urna condimentum mattis pellentesque id nibh tortor id. Placerat in egestas erat imperdiet sed euismod nisi porta. Blandit volutpat maecenas volutpat blandit aliquam. Nulla facilisi nullam vehicula ipsum a. Metus vulputate eu scelerisque felis imperdiet. Eget gravida cum sociis natoque penatibus et magnis dis. Suspendisse in est ante in nibh mauris cursus mattis molestie. Interdum consectetur libero id faucibus nisl tincidunt eget nullam non. Nisl condimentum id venenatis a condimentum. Faucibus turpis in eu mi. Nisl condimentum id venenatis a condimentum vitae sapien pellentesque habitant. Tortor condimentum lacinia quis vel. Vulputate odio ut enim blandit volutpat maecenas volutpat.</p>

<p>   Lacus luctus accumsan tortor posuere ac ut consequat. Volutpat est velit egestas dui. Netus et malesuada fames ac turpis egestas. Proin nibh nisl condimentum id venenatis a condimentum vitae. Nisi porta lorem mollis aliquam ut porttitor leo. Ultrices mi tempus imperdiet nulla malesuada. Quam vulputate dignissim suspendisse in est ante in nibh. Faucibus purus in massa tempor nec feugiat nisl pretium. Mattis pellentesque id nibh tortor id aliquet lectus proin. Hendrerit dolor magna eget est lorem ipsum. Aliquam ultrices sagittis orci a scelerisque purus semper eget duis. Cras ornare arcu dui vivamus arcu felis bibendum.</p>

<p>    Eget nullam non nisi est. Viverra adipiscing at in tellus integer feugiat. At erat pellentesque adipiscing commodo elit. In hac habitasse platea dictumst vestibulum. Ut sem nulla pharetra diam. Dictum at tempor commodo ullamcorper a lacus. Amet nulla facilisi morbi tempus. Cras tincidunt lobortis feugiat vivamus. Morbi tristique senectus et netus et malesuada fames ac turpis. Eget mi proin sed libero enim sed. Vulputate ut pharetra sit amet aliquam id diam maecenas ultricies. Eget gravida cum sociis natoque penatibus et magnis dis parturient.</p>


<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/87/three.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>

<script src="./examples/OrbitControls.js"></script>
<script src="./examples/OBJLoader.js"></script>
<script src="./examples/MTLLoader.js"></script>
<script src="./libs/dat.gui.js"></script>
<!--<script src="/examples/3d-obj-loader/scripts.js"></script>-->


<script>
    var scene = new THREE.Scene();
    scene.background = new THREE.Color( 0xf0f0f0 );


    var camera = new THREE.PerspectiveCamera( 20, window.innerWidth/window.innerHeight, 10, 40000 );
    camera.position.set(0, 0, 0);
    //camera.position.set( 100, 500, 1000);
    //camera.position.z = -60;

    var renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.getElementById("model-1").appendChild( renderer.domElement );

    var controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.50;
    controls.enableZoom = true;
    controls.maxPolarAngle = Math.PI / 2;
    controls.maxDistance = 30000;

//    controls.noPan = true;
//    controls.noKeys = true;
//    controls.noRotate = true;
    var allow_zoom = false;
    controls.noZoom = true;

    $("#model-1").on("click", function(){
        allow_zoom = !allow_zoom;
        allow_zoom === false ? controls.noZoom = true : controls.noZoom = false;
    });


    var keyLight = new THREE.DirectionalLight(0x999999, 1.0);
    keyLight.position.set(-100, -100, 100);

    var fillLight = new THREE.DirectionalLight(0xD3D3D3, 1.0);
    fillLight.position.set(-100, 0, 100);

    var backLight = new THREE.DirectionalLight(0xffffff, 1.0);
    backLight.position.set(100, 0, -100).normalize();


    scene.add(keyLight);
    scene.add(fillLight);
    scene.add(backLight);


    var mtlLoader = new THREE.MTLLoader();
    mtlLoader.setTexturePath('./model/sinagoga_new/');
    mtlLoader.setPath('./model/sinagoga_new/');
    mtlLoader.load('obj.mtl', function (materials) {

        materials.preload();

        var objLoader = new THREE.OBJLoader();
        objLoader.setMaterials(materials);
        objLoader.setPath('./model/sinagoga_new/');
        objLoader.load('obj.obj', function (object) {

            //якщо обʼєкт має зміщений центр. Оце супер важливо, рятує все на світі.
            var boundingBox = new THREE.Box3();
            boundingBox.setFromObject( object );

            // set camera to rotate around center of object
            controls.target = boundingBox.getCenter();
            scene.add(object);
            camera.position.y = -5000;
           // camera.position.x = -5000;

            controls.update();
        });

    });


    /* Детектить, чи всі текстури завантажились*/
    THREE.DefaultLoadingManager.onProgress = function ( item, loaded, total ) {
        if (loaded === total) {
            jQuery('#loading').fadeOut(1000);
        }
    };

    var animate = function () {
        requestAnimationFrame( animate );
        controls.update();
        renderer.render(scene, camera);
    };

    animate();


    function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

        renderer.render(scene, camera);

    }

    window.addEventListener( 'resize', onWindowResize );
</script>







</body>
</html>